<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
        <title>Page 1</title>
        <link rel="stylesheet" href="css/mystylesheet.css" />
        <link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css" />
    </head>
    <body>
        <div class="mytoolbar" id="toolbar">
            <ul>
                <li>Messaging</li>
                <li style="float:right"><a href="#" onclick="gotoHome()"><img src="img/icon/home.png"/></a></li>
            </ul>
        </div>    
        <div class="main">
            <span id="token"></span>
            <span id="tokenFound" style="display:none"></span>
            <h3>Try locally to simulate notifications</h3>
            <form id="notificationOptionsForm">
                <div>
                    <label>
                        Notification Style
                        <select id="notificationStyle">
                            <option value="simple">Simple</option>
                            <option value="multipleLines">Multiple Lines</option>
                            <option value="bigText">Big Text</option>
                            <option value="bigPicture">Big Picture</option>
                        </select>
                    </label>
                </div>
                <div class="style-all">
                    <button class="nullify">Disable</button>
                    <label>Id
                        <input name="id" type="number" value="999" />
                    </label>
                </div>
                <div class="style-all">
                    <button class="nullify">Disable</button>
                    <label>Title
                        <input name="title" value="App Example Title" />
                    </label>
                </div>
                <div class="style-simple">
                    <button class="nullify">Disable</button>
                    <label>Text
                        <input name="text" value="Message text" />
                    </label>
                </div>
                <div class="style-multipleLines">
                    <button class="nullify">Disable</button>
                    <label>Text Lines
                        <textarea name="textLines">Text line 1
Text line 2
Text line 3
Text line 4
Text line 5</textarea>
                    </label>
                </div>
                <div class="style-multipleLines style-bigText style-bigPicture">
                    <button class="nullify">Disable</button>
                    <label>Summary
                        <input name="summary" value="Summary test" />
                    </label>
                </div>
                <div class="style-bigText">
                    <button class="nullify">Disable</button>
                    <label>Big Text
                        <textarea name="bigText">Big text line 1
Big text line 2 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris mollis urna sed nisl venenatis, a tincidunt orci iaculis. In hac habitasse platea dictumst. Nulla quis hendrerit risus. Morbi neque lectus, laoreet quis dui quis, luctus blandit mauris. Sed ullamcorper risus et lorem facilisis, sit amet tristique nulla rutrum. Vivamus auctor pulvinar ligula, tempor lacinia arcu commodo in. Ut condimentum dolor ac felis venenatis, sit amet cursus erat accumsan. Aliquam a justo elit. Maecenas dignissim suscipit ipsum, nec laoreet velit.</textarea>
                    </label>
                </div>
                <div class="style-bigPicture">
                    <button class="nullify">Disable</button>
                    <label>Big Picture
                        <input name="bigPicture" value="https://cloud.githubusercontent.com/assets/7321362/24875178/1e58d2ec-1ddc-11e7-96ed-ed8bf011146c.png" />
                    </label>
                </div>
                <div class="style-all">
                    <button class="nullify">Disable</button>
                    <label>Small Icon
                        <input name="smallIcon" value="mipmap/icon" />
                    </label>
                </div>
                <div class="style-all">
                    <button class="nullify">Disable</button>
                    <label>Large Icon
                        <input name="largeIcon" value="https://avatars2.githubusercontent.com/u/1174345?v=3&s=96" />
                    </label>
                </div>
                <div class="style-all">
                    <button class="nullify">Disable</button>
                    <label>Auto Cancel
                        <input name="autoCancel" type="checkbox" checked />
                    </label>
                </div>
                <div id="notificationOptionsVibrationOptionDiv">
                    <button class="nullify">Disable</button>
                    <label>Vibration
                        <select id="notificationOptionsVibrationOption">
                            <option value="true">Default</option>
                            <option value="false">Disabled</option>
                            <option value="custom">Custom</option>
                        </select>
                    </label>
                </div>
                <div id="notificationOptionsCustomVibrate">
                    <button class="nullify" style="visibility:hidden">Disable</button>
                    <label>Vibrate As
                        <input value="[200, 300, 200, 300]" />
                    </label>
                </div>
                <div class="style-all">
                    <button class="nullify">Disable</button>
                    <label>Color
                        <input name="color" type="color" value="#0000ff" />
                    </label>
                </div>
                <div id="notificationOptionsSoundOptionDiv">
                    <button class="nullify">Disable</button>
                    <label>Sound
                        <select id="notificationOptionsSoundOption">
                            <option value="true">Default</option>
                            <option value="false">Disabled</option>
                            <option value="resource">Local Resource</option>
                            <option value="online">From the Web</option>
                        </select>
                    </label>
                </div>
                <div id="notificationOptionsResourceSound">
                    <button class="nullify" style="visibility:hidden">Disable</button>
                    <label>Local Sound
                        <input value="res://raw/lost_european_the_beginning_of_the_end_mp3" />
                    </label>
                </div>
                <div id="notificationOptionsOnlineSound">
                    <button class="nullify" style="visibility:hidden">Disable</button>
                    <label>Online Sound
                        <input value="http://tindeck.com/download/pro/yjuow/Not_That_Guy.mp3" />
                    </label>
                </div>
                <div class="style-all">
                    <button class="nullify">Disable</button>
                    <label>Heads-up
                        <input name="headsUp" type="checkbox" />
                    </label>
                </div>
                <div class="style-all">
                    <button class="nullify">Disable</button>
                    <label>Open app
                        <input name="openApp" type="checkbox" />
                    </label>
                </div>
                <button type="submit">Show Notification</button>
                <button type="button" id="updateGeneratedCodeButton">Show/Update Code</button>
                <button type="button" id="saveOptionsLocally">Save Options Locally</button>
            </form>
            <pre id="generatedCode"></pre>
        </div>

        <script type="text/javascript">
            var TAG = "messaging: ";
            var messaging;
            document.addEventListener("deviceready", onDeviceReady, false);
            function onDeviceReady() {
                console.log(TAG + "device ready")
                document.addEventListener("backbutton", BackKeyDown, true);

                tries = 100;
                var interval = setInterval(function () {
                    if (--tries < 0) {
                        clearInterval(interval);
                        document.getElementById('token').innerHTML = 'Firebase Token could not be acquired!';
                    }
                    FCMPlugin.getToken(function (token) {
                        if (token !== null && token !== '') {
                            document.getElementById('token').innerHTML = 'Firebase Token: ' + token;
                            document.getElementById('tokenFound').innerHTML = token;
                            clearInterval(interval);
                        }
                    }, function (e) {
                        document.getElementById('token').innerHTML = JSON.stringify(e);
                    });
                }, 100);

                FCMPlugin.onNotification(function (data) {
                    if (data.wasTapped) {
                        //Notification was received on device tray and tapped by the user.
                        alert(JSON.stringify(data));
                    } else {
                        //Notification was received in foreground. Maybe the user needs to be notified.
                        // alert(JSON.stringify(data));
                    }
                });
            }


            function gotoHome()
            {
                window.location = "menu.html";
            }

            function BackKeyDown()
            {
                console.log(TAG + "Back Pressed");
                gotoHome();
            }
        </script>
        <script type="text/javascript" src="cordova.js"></script>
        <script src="js/jquery-1.11.1.min.js"></script>
        <script src="js/jquery.mobile-1.4.5.min.js"></script>
        <script src="js/simulation.js"></script>
        <!--<script src="js/PushNotification.js"></script>-->
    </body>
</html>