<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
	<title>Page 1</title>
	<link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css" />
	<meta http-equiv="Content-Security-Policy" content="default-src 'self'; frame-src 'self' https://restcountries.eu">
</head>
<body>
	<div data-role="page">
		<div data-role="navbar">
			<ul>
				<li><a href="#" onclick="goBack()" data-icon="back">Back</a></li>
				<li><a href="#" onclick="doGet()" data-icon="arrow-u">Get</a></li>
				<li><a href="#" data-icon="search">Database</a></li>
			</ul>
		</div>
		<div data-role="header">
			<h1>Rest GET</h1>
		</div>

		<div id='restResponse'>Press button to GET</div>
		
	</div>

	<script type="text/javascript">
		var TAG = "restGet: ";
		document.addEventListener("deviceready", onDeviceReady, false);
		

		function onDeviceReady() {
			console.log(TAG + "device ready");
			document.addEventListener("backbutton", BackKeyDown, true);
			// doGet();			
		}

		function doGet() {
			var element = document.getElementById("restResponse");
			element.innerHTML = "Performing GET...";
			var request = new XMLHttpRequest();
			request.open("GET", "https://restcountries.eu/rest/v2/alpha/za", true);
			//Call a function when the state changes.
			request.onreadystatechange = function() {
				console.log(TAG + "received response");
				var response = request.responseText;
				
				element.innerHTML = response;
			}
			request.onerror = function() {
				element.innerHTML = "Error occurred";
			}
			console.log(TAG + "asking for tweets");
			request.send();
		}

		function goBack()
		{
			window.location = "index.html";
		}

		function BackKeyDown()
		{
			console.log(TAG + "Back Pressed");
		}
	</script>
	<script type="text/javascript" src="cordova.js"></script>
	<script src="js/jquery-1.11.1.min.js"></script>
	<script src="js/jquery.mobile-1.4.5.min.js"></script>
</body>
</html>