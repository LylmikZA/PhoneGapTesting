<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <title>PhoneGap Test</title>
    <link rel="stylesheet" href="css/mystylesheet.css" />
    <link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css" />
  </head>
  <body>
    <div class="mytoolbar" id="toolbar">
      <ul>
        <li>QR Code</li>
        <li style="float:right"><a href="#" onclick="gotoHome()"><img src="img/icon/home.png"/></a></li>
      </ul>
    </div>
    <div class="main">
      <input type="button" value="scan" name = "scan" id="scan"/>
    </div>

    <script type="text/javascript">
      var TAG = "qrcode: ";
      document.addEventListener("deviceready", onDeviceReady, true);

      function onDeviceReady()
      {
        document.addEventListener("backbutton", BackKeyDown, true);
        $('#scan').click(function ()
        {
          console.log('start scan');
          cordova.plugins.barcodeScanner.scan(
                  function (result) {
                    alert("We got a barcode\n" +
                            "Result: " + result.text + "\n" +
                            "Format: " + result.format + "\n" +
                            "Cancelled: " + result.cancelled);
                  },
                  function (error) {
                    alert("Scanning failed: " + error);
                  });
        }
        );
      }


      function gotoHome()
      {
        window.location = "menu.html";
      }

      function BackKeyDown()
      {
        console.log(TAG + "Back Pressed");
        gotoHome();
      }

    </script>
    <script type="text/javascript" src="cordova.js"></script>
    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/jquery.mobile-1.4.5.min.js"></script>
  </body>
</html>