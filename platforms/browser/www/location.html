<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
	<title>Page 1</title>
	<link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css" />
</head>
<body>
	<div data-role="page">
		<div data-role="navbar">
			<ul>
				<li><a href="#" onclick="goBack()" data-icon="back">Back</a></li>
				<li><a href="#" data-icon="home">Languages</a></li>
				<li><a href="#" data-icon="search">Database</a></li>
			</ul>
		</div>
		<div data-role="header">
			<h1>Location</h1>
		</div>

		<div id='locationInfo'>Loading location...</div>
		
	</div>

	<script type="text/javascript">
		document.addEventListener("deviceready", onDeviceReady, false);

		var watchId;
		function onDeviceReady() {
			console.log("location: device ready")
			document.addEventListener("backbutton", BackKeyDown, true);

			var options = {maximumAge: 3000, timeout: 10000, enableHighAccuracy: true };
			navigator.geolocation.getCurrentPosition(onSuccess);
			// navigator.geolocation.getCurrentPosition(onSuccess, onFailure, options);
			// watchId = navigator.geolocation.watchPosition(onSuccess, onFailure, options);

			
		}

		function onSuccess(position) {
			var date = new Date(position.timestamp);
			console.log('Coordinates: ' + position.coords);
			console.log('Timestamp: ' + position.timestamp);
			var element = document.getElementById('locationInfo');
			element.innerHTML = 'Latitude: ' +  position.coords.latitude + 
			'<br />' + 'Longitude: ' + position.coords.longitude + '<br />' +
			'<br />' + 'Timestamp: ' + date + '<br />';
		}

		function onError(error) {
			console.log('message: ' + error.message);
			console.log ('code: ' + error.code);
			var element = document.getElementById('locationInfo');
			element.innerHTML = 'Error: ' +  error.message + 
			'<br />' + 'Code: ' + error.code + '<br />';
		}

		function goBack()
		{
			navigator.geolocation.clearWatch(watchId);
			window.location = "index.html";
		}

		function BackKeyDown()
		{
			console.log("Back Pressed");
		}
	</script>
	<script type="text/javascript" src="cordova.js"></script>
	<script src="js/jquery-1.11.1.min.js"></script>
	<script src="js/jquery.mobile-1.4.5.min.js"></script>
</body>
</html>