<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <title>Page 1</title>
    <link rel="stylesheet" href="css/mystylesheet.css" />
    <link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css" />
  </head>
  <body>
    <div class="mytoolbar" id="toolbar">
      <ul>
        <li>Location</li>
        <li style="float:right"><a href="#" onclick="gotoHome()"><img src="img/icon/home.png"/></a></li>
      </ul>
    </div>    
    <div class="main">

      <div id='locationInfo'>Loading location...</div>
    </div>


    <script type="text/javascript">
      var TAG = "location: ";
      document.addEventListener("deviceready", onDeviceReady, false);

      var watchId;
      function onDeviceReady() {
          console.log(TAG + "device ready")
          document.addEventListener("backbutton", BackKeyDown, true);

//          var options = {maximumAge: 3000, timeout: 10000, enableHighAccuracy: true};
          navigator.geolocation.getCurrentPosition(onSuccess);
          // navigator.geolocation.getCurrentPosition(onSuccess, onFailure, options);
          // watchId = navigator.geolocation.watchPosition(onSuccess, onFailure, options);


      }

      function onSuccess(position) {
          var date = new Date(position.timestamp);
          console.log(TAG + 'Coordinates: ' + position.coords);
          console.log(TAG + 'Timestamp: ' + position.timestamp);
          var element = document.getElementById('locationInfo');
          element.innerHTML = 'Latitude: ' + position.coords.latitude +
                  '<br />' + 'Longitude: ' + position.coords.longitude + '<br />' +
                  '<br />' + 'Timestamp: ' + date + '<br />';
      }

      function onError(error) {
          console.log(TAG + 'message: ' + error.message);
          console.log(TAG + 'code: ' + error.code);
          var element = document.getElementById('locationInfo');
          element.innerHTML = 'Error: ' + error.message +
                  '<br />' + 'Code: ' + error.code + '<br />';
      }

      function gotoHome()
      {
          navigator.geolocation.clearWatch(watchId);
          window.location = "menu.html";
      }

      function BackKeyDown()
      {
          console.log(TAG + "Back Pressed");
          gotoHome();
      }
    </script>
    <script type="text/javascript" src="cordova.js"></script>
    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/jquery.mobile-1.4.5.min.js"></script>
  </body>
</html>