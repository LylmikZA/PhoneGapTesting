<!DOCTYPE html>
<html>
  <head>
    <title>Draw Signature</title>
    <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1"/>
    <link rel="stylesheet" href="css/mystylesheet.css" />
    <link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css" />
    <!--<link rel="stylesheet" href="css/jquery.signaturepad.css" />-->
  </head>
  <body>
    <div class="mytoolbar" id="toolbar">
      <ul>
        <li>Signature</li>
        <li style="float:right"><a href="#" onclick="gotoHome()"><img src="img/icon/home.png"/></a></li>
      </ul>
    </div>    

    <div class="main"  align="center">

      <form method="post" action="" class="sigPad">
        <label for="name">Please enter your name</label>
        <input type="text" name="name" id="name">
        <!--<p class="typeItDesc">Review your signature</p>-->
        <p>Draw your signature</p>
<!--        <ul class="sigNav">
          <li class="typeIt"><a href="#type-it" >Type It</a></li>
          <li class="drawIt"><a href="#draw-it" class="current" >Draw It</a></li>
          <li class="clearButton"><a href="#clear">Clear</a></li>
        </ul>-->
        
        <div align="center">
          <div class="typed"></div>
          <canvas width="400" height="200" id="sigmy"></canvas>
          <input type="hidden" name="output" class="output">
        </div>
        <ul class="sigNav">
          <li class="clearButton"><a href="#clear">Clear Signature</a></li>
        </ul>
        <div><input type="button" value="Save" id="mysign" onclick="setImage();"></div>
        <img width="200" height="100" id="sigmy1">
      </form>

    </div>
    <script type="text/javascript" src="cordova.js"></script>
    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/jquery.mobile-1.4.5.min.js"></script>
    <script src="js/jquery.signaturepad.js"></script>
    <script type="text/javascript" charset="utf-8">
          var TAG = 'sign ';
          // Wait for PhoneGap to load
          document.addEventListener("deviceready", onDeviceReady, false);

          // PhoneGap is ready
          function onDeviceReady() {
            console.log("device ready");
            document.addEventListener("backbutton", BackKeyDown, true);
            
            $('.sigPad').signaturePad();
            $('.sigmy').width(window.innerWidth*0.9);
            $('.sigmy').height(window.innerHeight*0.6);
          }

          function BackKeyDown()
          {
            console.log(TAG + "Back Pressed");
            gotoHome();
          }

          function gotoHome()
          {
            window.location = "menu.html";
          }

          $(document).ready(function () {
            $('.sigPad').signaturePad();
            $('.sigmy').width(window.innerWidth*0.9);
            $('.sigmy').height(window.innerHeight*0.6);
            
          });
          function setImage() {
            var a = $("#sigmy")[0];
            var b = a.toDataURL();
            document.getElementById("sigmy1").src = b;

          }


    </script>

  </body>
</html>